var app,scope,updateTime,header=document.getElementsByTagName("header")[0],nav=document.getElementsByTagName("nav")[0],main=document.getElementsByTagName("main")[0],mainBorderTop=parseInt($(main).css("border-top-width").replace("px","")),footer=document.getElementsByTagName("footer")[0],navList=document.getElementById("navlist"),list=nav.getElementsByTagName("li"),listWidth=null,listHeight=null,delta=null,narrow=!1;angular.module("appModule",[]),angular.module("appModule").controller("appController",function(e,t){app=this,scope=angular.element($(document.body)).scope(),app.Today=moment().toDate(),app.HealingAndWellnessScrolledOutOfView=!1,app.IsNarrow=!1,app.MenuOn=!1,app.IsModernTheme=!1,app.ToggleIsModernTheme=function(){app.IsModernTheme=!app.IsModernTheme,document.getElementById("mainCss").href=app.IsModernTheme?"css/main-modern.css":"css/main.css"},app.CurrentMainHeight="0px",app.ContactGoogleMapCurrentHeight="0px",app.PreviousNarrowMapHeight="0px",app.CurrentTheme,app.Themes={coffee:new ThemeObject({name:"coffee"}),blue:new ThemeObject({name:"blue"}),blueLight:new ThemeObject({name:"blue light",isDisabled:!1}),orange:new ThemeObject({name:"orange",isDisabled:!0})},app.SelectTheme=function(e){for(var t in app.Themes)app.Themes[t].isSelected=!1;app.CurrentTheme=e,e.isSelected=!0},app.SelectTheme(app.Themes.blue),app.CurrentFont,app.Fonts={sans:new ThemeObject({name:"sans-serif",isSelected:!1}),serif:new ThemeObject({name:"serif",isSelected:!0})},app.CurrentFontSize,app.FontSizes={normal:new ThemeObject({name:"normal",isSelected:!0}),big:new ThemeObject({name:"big",isSelected:!1}),bigger:new ThemeObject({name:"bigger",isSelected:!1})},app.SelectFontSize=function(e){for(var t in app.FontSizes)app.FontSizes[t].isSelected=!1;app.CurrentFontSize=e,app.CurrentFontSize.isSelected=!0,GetNavElementsWidth()},app.ExpandAllResources=!1,app.ResourceGroups=BaseResourceGroups,app.ToggleAllResources=function(){for(app.ExpandAllResources=!app.ExpandAllResources,i=0;i<app.ResourceGroups.length;i++){app.ResourceGroups[i].isRevealed=app.ExpandAllResources}},app.CurrentLink,app.NavigationLinks={home:new NavigationLinkObject({id:"home",name:"Welcome",position:0,page:"pages/welcome.html"}),services:new NavigationLinkObject({id:"services",name:"Services",position:2,page:"pages/services.html"}),about:new NavigationLinkObject({id:"about",name:"About",position:3,page:"pages/about.html"}),connect:new NavigationLinkObject({id:"connect",name:"Connect",position:4,page:"pages/connect.html",previousIds:["contact"]}),newClient:new NavigationLinkObject({id:"newClient",name:"New clients",position:5,page:"pages/newClient.html",previousId:["intake"]}),resources:new NavigationLinkObject({id:"resources",name:"Resources",position:6,page:"pages/resources.html"})},app.SelectLink=function(e){for(var t in app.NavigationLinks)app.NavigationLinks[t].isSelected=!1;e==app.NavigationLinks.connect&&log("select link called"),app.CurrentLink=e,app.CurrentLink.isSelected=!0},app.CheckHashAgainstPageIds=function(e){for(link in app.NavigationLinks){if(e==app.NavigationLinks[link].id)return e;for(previousId in app.NavigationLinks[link].previousIds)if(e==app.NavigationLinks[link].previousIds[previousId])return app.NavigationLinks[link].id}return null},app.UpdateCheckURL=function(e){if(e=null!=e&&e,null!=getHashValue("/page")){var t=app.CheckHashAgainstPageIds(getHashValue("/page"));1==e?null!=t?app.SelectLink(app.NavigationLinks[t]):app.PushHistory(app.NavigationLinks.home.id):app.SelectLink(app.NavigationLinks[t])}else app.PushHistory("home")},app.PushHistory=function(e){history.pushState(null,"","#/page="+e),app.UpdateCheckURL()}}).filter("orderObjectBy",function(){return function(e,t,a){var n=[];return angular.forEach(e,function(e){n.push(e)}),n.sort(function(e,a){return e[t]>a[t]?1:-1}),a&&n.reverse(),n}});var NavigationLinkObject=function(e){this.id=e.id,this.name=null==e.name?"":e.name,this.position=e.position,this.isSelected=null!=e.isSelected&&e.isSelected,this.isDisabled=null!=e.isDisabled&&e.isDisabled,this.previousIds=e.previousIds,this.page=e.page},ThemeObject=function(e){this.name=null==e.name?"":e.name,this.position=e.position,this.isSelected=null!=e.isSelected&&e.isSelected,this.isDisabled=null!=e.isDisabled&&e.isDisabled},FontObject=function(e){this.name=null==e.name?"":e.name,this.position=e.position,this.isSelected=null!=e.isSelected&&e.isSelected,this.isDisabled=null!=e.isDisabled&&e.isDisabled};function UpdateLayout(){narrow=document.body.offsetWidth-delta<listWidth||document.body.offsetHeight<550,app.IsNarrow=narrow;var e=document.body.offsetHeight-header.offsetTop-header.offsetHeight-nav.offsetHeight-footer.offsetHeight-(app.IsNarrow?0:20);if(app.CurrentMainHeight!=e+"px"&&(app.IsNarrow?("auto"!=app.CurrentMainHeight&&(app.CurrentMainHeight="auto"),app.PreviousNarrowMapHeight!=e+"px"&&(app.ContactGoogleMapCurrentHeight=parseInt(e)+"px",app.PreviousNarrowMapHeight=app.ContactGoogleMapCurrentHeight,app.NavigationLinks.connect.isSelected)):(app.CurrentMainHeight=e+"px",app.ContactGoogleMapCurrentHeight=parseInt(e)-80+"px")),narrow){var t=document.getElementsByTagName("wrap")[0].scrollTop;app.HealingAndWellnessScrolledOutOfView=t>30}scope.$apply()}function GetNavElementsWidth(){if(mainBorderTop=parseInt($(main).css("border-top-width").replace("px","")),list.length>0){for(var e=0,t=-1!=navigator.userAgent.indexOf("iPad")?73:0,a=list.length-1;a>=0;a--)e+=list[a].getElementsByTagName("button")[0].offsetWidth+2-t;listWidth=e,delta=80,app.UpdateCheckURL(!0),scope.$apply(),updateTime=window.setInterval(UpdateLayout,16),-1==document.getElementsByTagName("html")[0].className.indexOf("loaded")&&(document.getElementsByTagName("html")[0].className=document.getElementsByTagName("html")[0].className+" loaded")}else window.setTimeout(GetNavElementsWidth,100)}$(window).on("hashchange",function(){app.UpdateCheckURL(!0),scope.$apply()}),window.onpopstate=function(e){e&&e.state&&(window.location=window.location)},document.body.onload=window.setTimeout(function(){GetNavElementsWidth()},100);